<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Meta Tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Giphy-API</title>
    <!-- CSS Reset -->
    <link rel="stylesheet" type="text/css" href="assets/reset.css">
    <!-- Bootstrap Link -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <style>
        body{
            background: url("assets/images/email-pattern.png")
        }
        .container{
            margin-top: 3em;
            background-color: #E6EBE0;
            padding: 15px;
        }
        button{
          margin-top: 2px;
        }
        .giphs{
            height: auto;
            width: auto;
            margin: 3px;
            position: relative;
            float: left;
        }

    </style>
</head>
<body>
    <div id="body" class="container">
            <div class="row">
                  <div class="col">
                     -------- TITLE --------
                  </div>
                  <div class="col-md-auto">
                      -------- links --------
                  </div>
                  <div class="col col-lg-2">
                      -------- links --------
                  </div>
                </div>
            </div>
            <div class="container">
                <!-- Search bar goes here -->
                <form>
                    <div class="form-group">
                      <input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="Enter a Giphy category here..">
                      <small id="emailHelp" class="form-text text-muted">or just check out pre-made categories below</small>
                    </div>
                    <button type="submit" class="btn btn-primary">Search</button>
                </form>
            </div>
            <div class="container" id="button-field">
              <!-- pre-made categories go here -->

              <!-- <button type="button" class="btn btn-primary">Tennis</button>
              <button type="button" class="btn btn-secondary">Soccer</button>
              <button type="button" class="btn btn-success">NBA</button>
              <button type="button" class="btn btn-danger">MLB</button>
              <button type="button" class="btn btn-warning">NFL</button>
              <button type="button" class="btn btn-info">NHL</button>
              <button type="button" class="btn btn-light">UFC</button>
              <button type="button" class="btn btn-dark">WWE</button>
              <button type="button" class="btn btn-info">NCAA</button>
              <button type="button" class="btn btn-light">PGA</button>
              <button type="button" class="btn btn-dark">Rugby</button> -->
            </div>    
            <div class="container" id="giph-field">
              <!-- Giphs will display here -->
              <div class="spinner-border" role="status">
                  <span class="sr-only">Loading...</span>
                </div>
            </div>


    </div>
    <!-- Jquery -->
    <script
    src="https://code.jquery.com/jquery-3.4.1.js"
    integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
    crossorigin="anonymous"></script>
    <script type='text/javascript'>

    // Topics array and buttons
    var topics = ["Tennis", "Soccer", "NBA", "MLB", "NFL", "UFC", "WWE", "NCAA", "PGA", "Rugby"];
    var btn_type= ["primary", "secondary", "success", "danger", "warning", "info", "light", "dark", "info", "light", "dark"];

    function createButtons(){
    for(var i = 0; i < topics.length; i++){
        $("#button-field").append("<button type='button' class='btn btn-"+ btn_type [i]+"'>"+ topics[i] + "</button>");
        }
    };
    createButtons();
// Search button click needs to add to the topics array


// Clicking on topics button sends a request to the Giphy API and displays results to page
$(document).on("click", "button", function(){
    event.preventDefault();
    $("#giph-field").empty();
    
        // GIPHY API key
        var apiKey = "eJS4WvyhxtAfE3V3tJCZoBYbsrvGQ446";
        var topic = $(this).html();
        console.log(topic);
        var xhr = $.get("http://api.giphy.com/v1/gifs/search?q="+topic+"&api_key="+apiKey+"&limit=10");
        xhr.done(function(data) { 
            console.log("success got data", data.data);
            var results = data.data;
            for(var i = 0; i < results.length; i++){
                var giphField = $("<div class='giphs'>");
                var giph = data.data[i].images.downsized.url;
                var giphImage = $("<img>");
                    giphImage.attr("src", giph);

                // <image src="https://media3.giphy.com/media/KVVgzFKIlqBqx0OFIw/giphy-downsized.gif"></image>
                giphField.append(giphImage);

                $("#giph-field").append(giphField);
            }
         });


        // var search = "http://api.giphy.com/v1/gifs/search?q="+ topic + "&api_key="+ apiKey + "&limit=10";
        
        // $.ajax({
        //     url: search,
        //     method: "GET" 
        // }).then(function(response){
        //     console.log("success got data", response.data);

        // })

        
    })
    
    
    // clicking on the results starts and stops the giphy




    </script>
    <!-- Bootstrap JS plugins -->
    <!-- <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script> -->
</body>
</html>